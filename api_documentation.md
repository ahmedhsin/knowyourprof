# API documentation

Welcome to the API documentation for the project developed by Ahmed Mubarak. This API provides various endpoints to interact with the application, allowing users to register, log in, manage reviews, professors, facilities, reactions, and more. Each endpoint serves a specific purpose and is accessible based on user roles and authentication levels.

Please refer to the detailed documentation below for a comprehensive understanding of the available endpoints, their functionalities, required data, and expected responses.

**API developed by:** Ahmed Mubarak
**API docs generated by:** Chat Gpt
---
| Endpoint | Method | Required Role | Request Data | Response |
|----------|--------|---------------|--------------|----------|
| `/auth/register` | POST | None | `email`, `password`, `name`, `type`, `gender` | `201 Created`, `400 Bad Request`, `409 Conflict` |
| `/auth/login` | POST | None | `email`, `password`, `type` | `201 Created`, `400 Bad Request`, `401 Unauthorized` |
| `/auth/logout` | POST | None | None | `200 OK`, `401 Unauthorized` |
| `/admin/reviews/pending` | GET | Admin | None | JSON array of pending reviews |
| `/admin/reviews/<string:id>/approve` | POST | Admin | None | `200 OK`, `404 Not Found`, `409 Conflict` |
| `/admin/reviews/<string:id>/reject` | POST | Admin | None | `200 OK`, `404 Not Found`, `409 Conflict` |
| `/admin/reviews/approved/all` | GET | Admin | None | JSON array of approved reviews with admin names |
| `/admin/profs/pending` | GET | Admin | None | JSON array of pending professors |
| `/admin/profs/<string:id>/approve` | POST | Admin | None | `200 OK`, `404 Not Found`, `409 Conflict` |
| `/admin/profs/<string:id>/reject` | POST | Admin | None | `200 OK`, `404 Not Found`, `409 Conflict` |
| `/admin/profs/approved/all` | GET | Admin | None | JSON array of approved professors with admin names |
| `/account/user` | GET | User | None | JSON user information excluding password |
| `/account/admin` | GET | Admin | None | JSON admin information excluding password |
| `/account/reviews` | GET | User | None | JSON array of user reviews in preview format |
| `/profs/all` | GET | None | None | JSON array of approved professors with facilities |
| `/profs/filter` | GET | None | `name`, `facility`, `page`, `per_page`, `limit` | JSON array of filtered professors' details |
| `/profs/<string:id>` | GET | None | None | JSON professor details including facilities |
| `/profs/<string:id>/reviews` | GET | None | None | JSON array of approved reviews for professor |
| `/profs/new` | POST | User | `name`, `facilities`, `gender` | `201 Created`, `400 Bad Request` |
| `/profs/<string:id>/reviews/new` | POST | User | `text`, `rating` | `201 Created`, `400 Bad Request`, `409 Conflict` |
| `/reviews/all` | GET | None | None | JSON array of approved reviews |
| `/reviews/<string:id>` | GET | None | None | JSON approved review details |
| `/reviews/<string:id>` | PUT, DELETE | User | `text`, `rating`, `anonymous` | `200 OK`, `401 Unauthorized`, `404 Not Found` |
| `/react/reviews/<string:id>/react` | POST | User | `react` | `201 Created`, `400 Bad Request`, `404 Not Found` |
| `/react/reviews/<string:id>/react/count` | GET | None | None | JSON object with upvotes and downvotes count |
| `/facilities/all` | GET | None | None | JSON array of all facilities |
| `/facilities/filter` | GET | None | `name`, `page`, `per_page`, `limit` | JSON array of filtered facilities' details |


---
## API Endpoints for Auth

### Register
- **Endpoint:** `/auth/register`
- **HTTP Method:** POST
- **Required Data:**
  - `email` (string): The email of the user/admin to be registered.
  - `password` (string): The password for the user/admin.
  - `name` (string): The name of the user/admin.
  - `type` (string): The type of role (`user` or `admin`).
  - `gender` (string): The gender of the user/admin.
- **Role Determination:**
  - The `type` field is used to determine whether to register a `user` or an `admin`.
- **Response:**
  - `201 Created`: Registration successful.
  - `400 Bad Request`: Missing or incorrectly formatted data.
  - `409 Conflict`: Email already exists.

### Login
- **Endpoint:** `/auth/login`
- **HTTP Method:** POST
- **Required Data:**
  - `email` (string): The email of the user/admin trying to log in.
  - `password` (string): The password of the user/admin.
  - `type` (string): The type of role (`user` or `admin`).
- **Role Determination:**
  - The `type` field is used to determine whether to log in as a `user` or an `admin`.
- **Response:**
  - `201 Created`: Login successful.
  - `400 Bad Request`: Missing or incorrectly formatted data.
  - `401 Unauthorized`: Incorrect email or password, or user/admin already logged in.

### Logout
- **Endpoint:** `/auth/logout`
- **HTTP Method:** POST
- **Response:**
  - `200 OK`: Logout successful.
  - `401 Unauthorized`: User/admin not logged in.

---



## API Endpoints for Admin

### Pending Reviews
- **Endpoint:** `/admin/reviews/pending`
- **HTTP Method:** GET
- **Required Role:** Admin (credentials level 0)
- **Response:** JSON array of pending reviews with their details.

### Approve Review
- **Endpoint:** `/admin/reviews/<string:id>/approve`
- **HTTP Method:** POST
- **Required Role:** Admin (credentials level 0)
- **Response:**
  - `200 OK`: Review approved successfully.
  - `404 Not Found`: Review not found.
  - `409 Conflict`: Review already approved.

### Reject Review
- **Endpoint:** `/admin/reviews/<string:id>/reject`
- **HTTP Method:** POST
- **Required Role:** Admin (credentials level 0)
- **Response:**
  - `200 OK`: Review rejected successfully.
  - `404 Not Found`: Review not found.
  - `409 Conflict`: Review already approved.

### Get Approved Reviews
- **Endpoint:** `/admin/reviews/approved/all`
- **HTTP Method:** GET
- **Required Role:** Admin (credentials level 0)
- **Response:** JSON array of approved reviews with details, including the approving admin's name.

### Pending Professors
- **Endpoint:** `/admin/profs/pending`
- **HTTP Method:** GET
- **Required Role:** Admin (credentials level 0)
- **Response:** JSON array of pending professor details.

### Approve Professor
- **Endpoint:** `/admin/profs/<string:id>/approve`
- **HTTP Method:** POST
- **Required Role:** Admin (credentials level 0)
- **Response:**
  - `200 OK`: Professor approved successfully.
  - `404 Not Found`: Professor not found.
  - `409 Conflict`: Professor already approved.

### Reject Professor
- **Endpoint:** `/admin/profs/<string:id>/reject`
- **HTTP Method:** POST
- **Required Role:** Admin (credentials level 0)
- **Response:**
  - `200 OK`: Professor rejected successfully.
  - `404 Not Found`: Professor not found.
  - `409 Conflict`: Professor already approved.

### Get Approved Professors
- **Endpoint:** `/admin/profs/approved/all`
- **HTTP Method:** GET
- **Required Role:** Admin (credentials level 0)
- **Response:** JSON array of approved professors with details, including the approving admin's name.

---


## API Endpoints for Account

### User Information
- **Endpoint:** `/account/user`
- **HTTP Method:** GET
- **Required Role:** User (credentials level 1)
- **Response:** JSON containing the user's information excluding the password.

### Admin Information
- **Endpoint:** `/account/admin`
- **HTTP Method:** GET
- **Required Role:** Admin (credentials level 0)
- **Response:** JSON containing the admin's information excluding the password.

### User Reviews
- **Endpoint:** `/account/reviews`
- **HTTP Method:** GET
- **Required Role:** User (credentials level 1)
- **Response:** JSON array of the user's reviews in preview format.

---



## API Endpoints for Professors

### All Professors
- **Endpoint:** `/profs/all`
- **HTTP Method:** GET
- **Response:** JSON array containing details of all approved professors including their facilities.

### Filter Professors
- **Endpoint:** `/profs/filter`
- **HTTP Method:** GET
- **Query Parameters:**
  - `name` (optional): Filter professors by name (minimum 3 characters).
  - `facility` (optional): Filter professors by facility.
  - `page` (optional): Page number for pagination (default: 1).
  - `per_page` (optional): Number of items per page (default: 10).
  - `limit` (optional): Limit the number of results (no pagination if set).
- **Response:** JSON array of filtered professors' details.

### Get Professor
- **Endpoint:** `/profs/<string:id>`
- **HTTP Method:** GET
- **Response:** JSON containing details of a specific approved professor, including their facilities.

### Get Professor Reviews
- **Endpoint:** `/profs/<string:id>/reviews`
- **HTTP Method:** GET
- **Response:** JSON array of approved reviews for a specific professor.

### Add Professor
- **Endpoint:** `/profs/new`
- **HTTP Method:** POST
- **Required Role:** User (credentials level 1)
- **Request Data:**
  - `name` (string): Name of the professor.
  - `facilities` (list of strings): Facilities associated with the professor.
  - `gender` (string): Gender of the professor.
- **Response:**
  - `201 Created`: Professor created successfully.
  - `400 Bad Request`: Missing data or no facilities provided.

### Add Review for Professor
- **Endpoint:** `/profs/<string:id>/reviews/new`
- **HTTP Method:** POST
- **Required Role:** User (credentials level 1)
- **Request Data:**
  - `text` (string): Text of the review.
  - `rating` (float): Rating of the review.
- **Response:**
  - `201 Created`: Review added successfully.
  - `400 Bad Request`: Missing data or wrong data format.
  - `409 Conflict`: User already reviewed the professor.


---

## API Endpoints for Reviews

### All Reviews
- **Endpoint:** `/reviews/all`
- **HTTP Method:** GET
- **Response:** JSON array containing details of all approved reviews.

### Get Review
- **Endpoint:** `/reviews/<string:id>`
- **HTTP Method:** GET
- **Response:** JSON containing details of a specific approved review.

### Manipulate Review
- **Endpoint:** `/reviews/<string:id>`
- **HTTP Methods:** PUT, DELETE
- **Required Role:** User (credentials level 1)
- **Request Data (PUT):**
  - `text` (optional): New text for the review.
  - `rating` (optional): New rating for the review.
  - `anonymous` (optional): Set review as anonymous (boolean).
- **Response (PUT):**
  - `200 OK`: Review updated successfully.
  - `401 Unauthorized`: User not authorized to modify the review.
  - `404 Not Found`: Review not found.
- **Response (DELETE):**
  - `200 OK`: Review deleted successfully.
  - `401 Unauthorized`: User not authorized to delete the review.
  - `404 Not Found`: Review not found.


---

## API Endpoints for Reactions to Reviews

### React to Review
- **Endpoint:** `/react/reviews/<string:id>/react`
- **HTTP Method:** POST
- **Required Role:** User (credentials level 1)
- **Request Data:**
  - `react` (boolean): Indicates the user's reaction (like or dislike).
- **Response:**
  - `201 Created`: Reaction created or updated successfully.
  - `400 Bad Request`: Missing data.
  - `404 Not Found`: Review not found.
  - `200 OK`: Reaction deleted successfully.

### Get React Counts for Review
- **Endpoint:** `/react/reviews/<string:id>/react/count`
- **HTTP Method:** GET
- **Response:**
  - JSON object with the count of upvotes (likes) and downvotes (dislikes) for the specified review.

---

## API Endpoints for Facilities

### All Facilities
- **Endpoint:** `/facilities/all`
- **HTTP Method:** GET
- **Response:** JSON array containing details of all facilities.

### Filter Facilities
- **Endpoint:** `/facilities/filter`
- **HTTP Method:** GET
- **Query Parameters:**
  - `name` (optional): Filter facilities by name (minimum 3 characters).
  - `page` (optional): Page number for pagination (default: 1).
  - `per_page` (optional): Number of items per page (default: 10).
  - `limit` (optional): Limit the number of results (no pagination if set).
- **Response:** JSON array of filtered facilities' details.

---
