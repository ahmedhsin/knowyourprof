ðŸš€ **Know Your Professor API**

This API powers the "Know Your Professor" platform, providing users with insights into professors and their reviews. It has been developed using state-of-the-art backend technology to deliver a seamless user experience.

**Backend Technology Stack:**

-   **Framework:** Flask (Python)
-   **Database:** SQLAlchemy (SQL-based)
-   **Authentication:** JSON Web Tokens (JWT)
-   **Password Hashing:** Bcrypt
-   **API Documentation:** Generated by ChatGPT, Reviewed by Ahmed Mubarak
## Authentication API Documentation

### Register User or Admin

**Route:** `POST /api/auth/register`

**Description:** Register a new user or admin.

**Parameters:**

- **email** (string) - The email address of the user or admin.
- **password** (string) - The password for the user or admin.
- **name** (string) - The name of the user or admin.
- **type** (string) - The type of user (either "user" or "admin").
- **gender** (string) - The gender of the user or admin.

**Example Request:**
```http
POST /api/auth/register
Content-Type: application/json

{
  "email": "example@email.com",
  "password": "password123",
  "name": "John Doe",
  "type": "user",
  "gender": "male"
}
```

**Example Response (Success):**
```json
{
  "success": "Registered"
}
```

**Example Response (Error - Email Exists):**
```json
{
  "error": "Email Exists"
}
```

**Example Response (Error - Wrong Format):**
```json
{
  "error": "Wrong format"
}
```

### Login User or Admin

**Route:** `POST /api/auth/login`

**Description:** Log in as a user or admin.

**Parameters:**

- **email** (string) - The email address of the user or admin.
- **password** (string) - The password for the user or admin.
- **type** (string) - The type of user (either "user" or "admin").

**Example Request:**
```http
POST /api/auth/login
Content-Type: application/json

{
  "email": "example@email.com",
  "password": "password123",
  "type": "user"
}
```

**Example Response (Success):**
```json
{
  "token": "your_access_token_here",
  "type": "user"
}
```

**Example Response (Error - Incorrect Email or Password):**
```json
{
  "error": "Incorrect email or password"
}
```




## Admin API Documentation

### Get Pending Reviews

**Route:** `GET /api/admin/reviews/pending`

**Description:** Retrieve a list of pending reviews.

**Authentication:** This endpoint requires a valid JWT token with admin credentials.

**Example Request:**
```http
GET /api/admin/reviews/pending
Authorization: Bearer your_jwt_token_here
```

**Example Response (Success):**
```json
[
  {
    "id": 1,
    "prof_id": 123,
    "user_id": 456,
    "rating": 4,
    "comment": "Great professor!",
    "approved_by": null
  },
  {
    "id": 2,
    "prof_id": 789,
    "user_id": 101,
    "rating": 3.0,
    "comment": "Good professor.",
    "approved_by": null
  }
]
```

### Approve Review

**Route:** `POST /api/admin/reviews/<string:id>/approve`

**Description:** Approve a pending review by its ID.

**Authentication:** This endpoint requires a valid JWT token with admin credentials.

**Example Request:**
```http
POST /api/admin/reviews/1/approve
Authorization: Bearer your_jwt_token_here
```

**Example Response (Success):**
```json
{
  "success": "Approved"
}
```

**Example Response (Error - Review Already Approved):**
```json
{
  "error": "Already approved"
}
```

**Example Response (Error - Review Not Found):**
```json
{
  "error": "Not found"
}
```

### Reject Review

**Route:** `POST /api/admin/reviews/<string:id>/reject`

**Description:** Reject a pending review by its ID.

**Authentication:** This endpoint requires a valid JWT token with admin credentials.

**Example Request:**
```http
POST /api/admin/reviews/1/reject
Authorization: Bearer your_jwt_token_here
```

**Example Response (Success):**
```json
{
  "success": "Rejected"
}
```

**Example Response (Error - Review Already Approved):**
```json
{
  "error": "Already approved"
}
```

**Example Response (Error - Review Not Found):**
```json
{
  "error": "Not found"
}
```

### Get Approved Reviews

**Route:** `GET /api/admin/reviews/approved/all`

**Description:** Retrieve a list of all approved reviews.

**Authentication:** This endpoint requires a valid JWT token with admin credentials.

**Example Request:**
```http
GET /api/admin/reviews/approved/all
Authorization: Bearer your_jwt_token_here
```

**Example Response (Success):**
```json
[
  {
    "id": 1,
    "prof_id": 123,
    "user_id": 456,
    "rating": 4.5,
    "comment": "Great professor!",
    "approved_by": "Admin Name"
  },
  {
    "id": 2,
    "prof_id": 789,
    "user_id": 101,
    "rating": 3.0,
    "comment": "Good professor.",
    "approved_by": "Admin Name"
  }
]
```

### Get Pending Professors

**Route:** `GET /api/admin/profs/pending`

**Description:** Retrieve a list of pending professors.

**Authentication:** This endpoint requires a valid JWT token with admin credentials.

**Example Request:**
```http
GET /api/admin/profs/pending
Authorization: Bearer your_jwt_token_here
```

**Example Response (Success):**
```json
[
  {
    "id": 1,
    "name": "John Doe",
    "department": "Computer Science",
    "approved_by": null
  },
  {
    "id": 2,
    "name": "Jane Smith",
    "department": "Physics",
    "approved_by": null
  }
]
```

### Approve Professor

**Route:** `POST /api/admin/profs/<string:id>/approve`

**Description:** Approve a pending professor by their ID.

**Authentication:** This endpoint requires a valid JWT token with admin credentials.

**Example Request:**
```http
POST /api/admin/profs/1/approve
Authorization: Bearer your_jwt_token_here
```

**Example Response (Success):**
```json
{
  "success": "Approved"
}
```

**Example Response (Error - Professor Already Approved):**
```json
{
  "error": "Already approved"
}
```

**Example Response (Error - Professor Not Found):**
```json
{
  "error": "Not found"
}
```

### Reject Professor

**Route:** `POST /api/admin/profs/<string:id>/reject`

**Description:** Reject a pending professor by their ID.

**Authentication:** This endpoint requires a valid JWT token with admin credentials.

**Example Request:**
```http
POST /api/admin/profs/1/reject
Authorization: Bearer your_jwt_token_here
```

**Example Response (Success):**
```json
{
  "success": "Rejected"
}
```

**Example Response (Error - Professor Already Approved):**
```json
{
  "error": "Already approved"
}
```

**Example Response (Error - Professor Not Found):**
```json
{
  "error": "Not found"
}
```

### Get Approved Professors

**Route:** `GET /api/admin/profs/approved/all`

**Description:** Retrieve a list of all approved professors.

**Authentication:** This endpoint requires a valid JWT token with admin credentials.

**Example Request:**
```http
GET /api/admin/profs/approved/all
Authorization: Bearer your_jwt_token_here
```

**Example Response (Success):**
```json
[
  {
    "id": 1,
    "name": "John Doe",
    "department": "Computer Science",
    "approved_by": "Admin Name"
  },
  {
    "id": 2,
    "name": "Jane Smith",
    "department": "Physics",
    "approved_by": "Admin Name"
  }
]
```



## Account API Documentation

### Get User Information

**Route:** `GET /api/account/user`

**Description:** Retrieve information about the logged-in user.

**Authentication:** This endpoint requires a valid JWT token with user credentials.

**Example Request:**
```http
GET /api/account/user
Authorization: Bearer your_jwt_token_here
```

**Example Response (Success):**
```json
{
  "id": 1,
  "email": "user@example.com",
  "name": "John Doe",
  "gender": "male"
}
```

### Get Admin Information

**Route:** `GET /api/account/admin`

**Description:** Retrieve information about the logged-in admin.

**Authentication:** This endpoint requires a valid JWT token with admin credentials.

**Example Request:**
```http
GET /api/account/admin
Authorization: Bearer your_jwt_token_here
```

**Example Response (Success):**
```json
{
  "id": 1,
  "email": "admin@example.com",
  "name": "Admin Name"
}
```

### Get User Reviews

**Route:** `GET /api/account/reviews`

**Description:** Retrieve a list of reviews submitted by the logged-in user.

**Authentication:** This endpoint requires a valid JWT token with user credentials.

**Example Request:**
```http
GET /api/account/reviews
Authorization: Bearer your_jwt_token_here
```

**Example Response (Success):**
```json
[
  {
    "id": 1,
    "prof_id": 123,
    "rating": 4.5,
    "comment": "Great professor!"
  },
  {
    "id": 2,
    "prof_id": 456,
    "rating": 3.0,
    "comment": "Good professor."
  }
]
```



## Professors API Documentation

### Get All Professors

**Route:** `GET /api/profs/all`

**Description:** Retrieve a list of all approved professors.

**Example Request:**
```http
GET /api/profs/all
```

**Example Response (Success):**
```json
[
  {
    "id": 1,
    "name": "John Doe",
    "gender": "Male",
    "facilities": [
      {
        "id": 1,
        "name": "Facility 1"
      },
      {
        "id": 2,
        "name": "Facility 2"
      }
    ],
    "total_reviews": 10,
    "average_rating": 4.5
  },
  {
    "id": 2,
    "name": "Jane Smith",
    "gender": "Female",
    "facilities": [
      {
        "id": 3,
        "name": "Facility 3"
      }
    ],
    "total_reviews": 5,
    "average_rating": 3.0
  }
]
```

### Filter Professors

**Route:** `GET /api/profs/filter`

**Description:** Filter professors based on name, facility, and pagination.

**Query Parameters:**

- **name** (string, optional) - Filter professors by name.
- **facility** (string, optional) - Filter professors by facility.
- **page** (integer, optional) - Page number for pagination (default: 1).
- **limit** (integer, optional) - Limit the number of results (default: 0 for no limit).
- **per_page** (integer, optional) - Number of results per page (default: 10).

**Example Request:**
```http
GET /api/profs/filter?name=John&facility=Facility 1&page=1&limit=10&per_page=5
```

**Example Response (Success):**
```json
{
  "hasNext": true,
  "profs": [
    {
      "id": 1,
      "name": "John Doe",
      "gender": "Male",
      "facilities": [
        {
          "id": 1,
          "name": "Facility 1"
        },
        {
          "id": 2,
          "name": "Facility 2"
        }
      ],
      "total_reviews": 10,
      "average_rating": 4.5
    }
  ]
}
```

### Get Professor by ID

**Route:** `GET /api/profs/<string:id>`

**Description:** Retrieve information about a specific professor by their ID.

**Example Request:**
```http
GET /api/profs/1
```

**Example Response (Success):**
```json
{
  "id": 1,
  "name": "John Doe",
  "gender": "Male",
  "facilities": [
    {
      "id": 1,
      "name": "Facility 1"
    },
    {
      "id": 2,
      "name": "Facility 2"
    }
  ],
  "total_reviews": 10,
  "average_rating": 4.5
}
```

### Get Professor Reviews

**Route:** `GET /api/profs/<string:id>/reviews`

**Description:** Retrieve a list of reviews for a specific professor by their ID.

**Example Request:**
```http
GET /api/profs/1/reviews
```

**Example Response (Success):**
```json
[
  {
    "id": 1,
    "prof_id": 1,
    "rating": 4.5,
    "comment": "Great professor!"
  },
  {
    "id": 2,
    "prof_id": 1,
    "rating": 3.0,
    "comment": "Good professor."
  }
]
```

### Add New Professor

**Route:** `POST /api/profs/new`

**Description:** Create a new professor.

**Authentication:** This endpoint requires a valid JWT token with user credentials.

**Request Body:**

- **name** (string) - The name of the professor.
- **facility** (string) - The facility associated with the professor.
- **gender** (boolean) - The gender of the professor (true for male, false for female).

**Example Request:**
```http
POST /api/profs/new
Content-Type: application/json
Authorization: Bearer your_jwt_token_here

{
  "name": "John Doe",
  "facility": "Facility 1",
  "gender": true
}
```

**Example Response (Success):**
```json
{
  "success": "Created"
}
```

### Add New Review for Professor

**Route:** `POST /api/profs/<string:id>/reviews/new`

**Description:** Create a new review for a specific professor by their ID.

**Authentication:** This endpoint requires a valid JWT token with user credentials.

**Request Body:**

- **text** (string) - The text of the review.
- **rating** (float) - The rating for the professor.
- **overview** (string) - The overview of the review.
- **anonymous** (boolean) - Whether the review is anonymous or not.

**Example Request:**
```http
POST /api/profs/1/reviews/new
Content-Type: application/json
Authorization: Bearer your_jwt_token_here

{
  "text": "Great professor!",
  "rating": 4,
  "overview": "Excellent teaching skills.",
  "anonymous": false
}
```

**Example Response (Success):**
```json
{
  "success": "Created"
}
```

### Get All Reactions for Reviews

**Route:** `GET /api/profs/<string:id>/reviews/react/all`

**Description:** Retrieve all reactions (likes/dislikes) for reviews of a specific professor by their ID.

**Authentication:** This endpoint requires a valid JWT token with admin credentials.

**Example Request:**
```http
GET /api/profs/1/reviews/react/all
Authorization: Bearer your_jwt_token_here
```

**Example Response (Success):**
```json
{
  "1": "like",
  "2": "dislike"
}
```



## Facilities API Documentation

### Get All Facilities

**Route:** `GET /api/facilities/all`

**Description:** Retrieve a list of all facilities.

**Example Request:**
```http
GET /api/facilities/all
```

**Example Response (Success):**
```json
[
  {
    "id": 1,
    "name": "Facility 1"
  },
  {
    "id": 2,
    "name": "Facility 2"
  }
]
```

### Filter Facilities

**Route:** `GET /api/facilities/filter`

**Description:** Filter facilities based on name and pagination.

**Query Parameters:**

- **name** (string, optional) - Filter facilities by name.
- **page** (integer, optional) - Page number for pagination (default: 1).
- **limit** (integer, optional) - Limit the number of results (default: 0 for no limit).
- **per_page** (integer, optional) - Number of results per page (default: 10).

**Example Request:**
```http
GET /api/facilities/filter?name=Facility&page=1&limit=10&per_page=5
```

**Example Response (Success):**
```json
{
  "hasNext": true,
  "allFacilities": [
    {
      "id": 1,
      "name": "Facility 1"
    }
  ]
}
```


## Reviews API Documentation

### Get All Reviews

**Route:** `GET /api/reviews/all`

**Description:** Retrieve a list of all approved reviews.

**Example Request:**
```http
GET /api/reviews/all
```

**Example Response (Success):**
```json
[
  {
    "id": 1,
    "prof_id": 123,
    "rating": 4.5,
    "comment": "Great professor!"
  },
  {
    "id": 2,
    "prof_id": 456,
    "rating": 3.0,
    "comment": "Good professor."
  }
]
```

### Get Review by ID

**Route:** `GET /api/reviews/<string:id>`

**Description:** Retrieve information about a specific review by its ID.

**Example Request:**
```http
GET /api/reviews/1
```

**Example Response (Success):**
```json
{
  "id": 1,
  "prof_id": 123,
  "rating": 4.5,
  "comment": "Great professor!"
}
```

### Update or Delete Review

**Route:** `PUT /api/reviews/<string:id>` or `DELETE /api/reviews/<string:id>`

**Description:** Update or delete a specific review by its ID. Users can update their own reviews, and admins can delete any review.

**Authentication:** This endpoint requires a valid JWT token with user credentials.

**Request (Update) Body:**

- **text** (string, optional) - Updated text of the review.
- **rating** (float, optional) - Updated rating for the review.
- **overview** (string, optional) - Updated overview of the review.
- **anonymous** (boolean, optional) - Whether the review is anonymous or not.

**Example Request (Update):**
```http
PUT /api/reviews/1
Content-Type: application/json
Authorization: Bearer your_jwt_token_here

{
  "text": "Updated review text",
  "rating": 4.0,
  "overview": "Updated review overview",
  "anonymous": false
}
```

**Example Response (Update - Success):**
```json
{
  "success": "Updated"
}
```

**Request (Delete):**

No request body is required for delete operation.

**Example Request (Delete):**
```http
DELETE /api/reviews/1
Authorization: Bearer your_jwt_token_here
```

**Example Response (Delete - Success):**
```json
{
  "success": "Deleted"
}
```


## Reactions API Documentation

### React to a Review

**Route:** `POST /api/reviews/<string:id>/react`

**Description:** React to a review by giving it an upvote or downvote.

**Authentication:** This endpoint requires a valid JWT token with user credentials.

**Request Body:**

- **react** (boolean, required) - Set to `true` for an upvote and `false` for a downvote.

**Example Request (Upvote):**
```http
POST /api/reviews/1/react
Content-Type: application/json
Authorization: Bearer your_jwt_token_here

{
  "react": true
}
```

**Example Request (Downvote):**
```http
POST /api/reviews/2/react
Content-Type: application/json
Authorization: Bearer your_jwt_token_here

{
  "react": false
}
```

**Example Response (Upvote or Downvote - Success):**
```json
{
  "success": "Created"
}
```

### Update or Delete Reaction

**Route:** `POST /api/reviews/<string:id>/react`

**Description:** Update or delete a reaction to a review by its ID. Users can only update their own reactions.

**Authentication:** This endpoint requires a valid JWT token with user credentials.

**Request Body (Update):**

- **react** (boolean, required) - Updated reaction value (`true` for upvote, `false` for downvote).

**Example Request (Update):**
```http
POST /api/reviews/1/react
Content-Type: application/json
Authorization: Bearer your_jwt_token_here

{
  "react": false
}
```

**Request (Delete):**

No request body is required for delete operation.

**Example Request (Delete):**
```http
DELETE /api/reviews/2/react
Authorization: Bearer your_jwt_token_here
```

**Example Response (Update or Delete - Success):**
```json
{
  "success": "Updated" (or "Deleted")
}
```

### Get Reaction Counts for a Review

**Route:** `GET /api/reviews/<string:id>/react/count`

**Description:** Retrieve the counts of upvotes (likes) and downvotes (dislikes) for a review.

**Example Request:**
```http
GET /api/reviews/1/react/count
```

**Example Response (Success):**
```json
{
  "upvotes": 5,
  "downvotes": 2
}
```
